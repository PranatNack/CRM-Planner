<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå - BIGIT CRM</title>
  <link rel="icon" type="image/png" href="https://crm.bigitcorp.co.th/images/logo-icon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
  <div class="page-wrapper">
    <!-- Header -->
    <header class="header"></header>

    <!-- Main Content -->
    <main class="main-content">
      <div class="container">
        <!-- Page Header -->
        <div style="margin-bottom: var(--spacing-xl);">
          <h1>üìã ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå</h1>
          <p class="text-muted">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
        </div>

        <!-- Projects Table -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå</h3>
            <button class="btn btn-primary" onclick="openCreateProjectModal()">
              ‚ûï ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà
            </button>
          </div>
          
          <!-- Search and Sort Controls -->
          <div style="padding: var(--spacing-lg); border-bottom: 1px solid var(--color-gray-200); background: var(--color-gray-50);">
            <div style="display: flex; gap: var(--spacing-md); align-items: center; flex-wrap: wrap;">
              <!-- Search -->
              <div style="flex: 1; min-width: 250px;">
                <div style="position: relative;">
                  <input 
                    type="text" 
                    id="projectSearchInput" 
                    class="form-control" 
                    placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå (‡∏ä‡∏∑‡πà‡∏≠, ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏ç‡∏ç‡∏≤, ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£...)"
                    oninput="filterAndSortProjects()"
                    style="padding-right: 40px;">
                  <button 
                    onclick="clearSearch()"
                    style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; font-size: 1.2rem; color: var(--color-gray-400); display: none;"
                    id="clearSearchBtn">
                    ‚úï
                  </button>
                </div>
              </div>
              
              <!-- Sort Controls -->
              <div style="display: flex; gap: var(--spacing-sm); align-items: center;">
                <label style="font-weight: 500; white-space: nowrap;">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°:</label>
                <select 
                  id="projectSortSelect" 
                  class="form-control" 
                  onchange="filterAndSortProjects()"
                  style="min-width: 150px;">
                  <option value="newest">‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (Newest)</option>
                  <option value="oldest">‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏∏‡∏î (Oldest)</option>
                  <option value="name-asc">‡∏ä‡∏∑‡πà‡∏≠ A-Z</option>
                  <option value="name-desc">‡∏ä‡∏∑‡πà‡∏≠ Z-A</option>
                </select>
              </div>
            </div>
          </div>
          
          <div class="card-body" style="padding: 0;">
            <div class="table-wrapper" style="border: none; border-radius: 0;">
              <table class="table" style="border-collapse: collapse; margin: 0;">
                <thead>
                  <tr style="background: var(--color-gray-100); border-bottom: 2px solid var(--color-gray-300);">
                    <th onclick="sortByColumn('name')" style="padding: var(--spacing-md); border: 1px solid var(--color-gray-200); text-align: left; font-weight: 600; cursor: pointer; user-select: none;" title="‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö">
                      ‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå <span id="sort-name"></span>
                    </th>
                    <th onclick="sortByColumn('contract')" style="padding: var(--spacing-md); border: 1px solid var(--color-gray-200); text-align: center; font-weight: 600; cursor: pointer; user-select: none;" title="‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö">
                      ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏ç‡∏ç‡∏≤ <span id="sort-contract"></span>
                    </th>
                    <th onclick="sortByColumn('fiscal')" style="padding: var(--spacing-md); border: 1px solid var(--color-gray-200); text-align: center; font-weight: 600; cursor: pointer; user-select: none;" title="‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö">
                      ‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì <span id="sort-fiscal"></span>
                    </th>
                    <th onclick="sortByColumn('startDate')" style="padding: var(--spacing-md); border: 1px solid var(--color-gray-200); text-align: center; font-weight: 600; cursor: pointer; user-select: none;" title="‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö">
                      ‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå <span id="sort-startDate"></span>
                    </th>
                    <th onclick="sortByColumn('endDate')" style="padding: var(--spacing-md); border: 1px solid var(--color-gray-200); text-align: center; font-weight: 600; cursor: pointer; user-select: none;" title="‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö">
                      ‡∏ß‡∏±‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏™‡∏±‡∏ç‡∏ç‡∏≤ <span id="sort-endDate"></span>
                    </th>
                    <th onclick="sortByColumn('manager')" style="padding: var(--spacing-md); border: 1px solid var(--color-gray-200); text-align: center; font-weight: 600; cursor: pointer; user-select: none;" title="‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö">
                      ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ <span id="sort-manager"></span>
                    </th>
                    <th style="padding: var(--spacing-md); border: 1px solid var(--color-gray-200); text-align: center; font-weight: 600; min-width: 150px;">
                      ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
                    </th>
                    <th onclick="sortByColumn('taskCount')" style="padding: var(--spacing-md); border: 1px solid var(--color-gray-200); text-align: center; font-weight: 600; cursor: pointer; user-select: none;" title="‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö">
                      ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏á‡∏≤‡∏ô <span id="sort-taskCount"></span>
                    </th>
                    <th style="padding: var(--spacing-md); border: 1px solid var(--color-gray-200); text-align: center; font-weight: 600;">
                      ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
                    </th>
                    <th style="padding: var(--spacing-md); border: 1px solid var(--color-gray-200); text-align: center; font-weight: 600; min-width: 140px;">
                      ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£
                    </th>
                  </tr>
                </thead>
                <tbody id="projectsTableBody">
                  <!-- Projects will be rendered here by JavaScript -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Project Modal -->
  <div class="modal" id="projectModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="projectModalTitle">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà</h2>
        <button class="modal-close" onclick="closeModal('projectModal')">&times;</button>
      </div>
      <div class="modal-body">
        <form id="projectForm">
          <div class="form-group">
            <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå *</label>
            <input type="text" class="form-control" id="projectName" required>
          </div>

          <div class="form-group">
            <label class="form-label">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label>
            <textarea class="form-control" id="projectDescription" rows="3"></textarea>
          </div>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md);">
            <div class="form-group">
              <label class="form-label">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏ç‡∏ç‡∏≤</label>
              <input type="text" class="form-control" id="projectContractNumber" placeholder="CNT-2025-001">
            </div>

            <div class="form-group">
              <label class="form-label">‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì (‡∏û.‡∏®.)</label>
              <input type="text" class="form-control" id="projectFiscalYear" placeholder="2568">
            </div>
          </div>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md);">
            <div class="form-group">
              <label class="form-label">‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå</label>
              <input type="date" class="form-control" id="projectStartDate">
            </div>

            <div class="form-group">
              <label class="form-label">‡∏ß‡∏±‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏™‡∏±‡∏ç‡∏ç‡∏≤</label>
              <input type="date" class="form-control" id="projectExpirationDate">
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</label>
            <select class="form-control" id="projectStatus">
              <option value="todo">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°</option>
              <option value="inprogress" selected>‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option>
              <option value="done">‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</option>
            </select>
          </div>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md);">
            <div class="form-group">
              <label class="form-label">‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå</label>
              <select class="form-control" id="projectOwner"></select>
            </div>

            <div class="form-group">
              <label class="form-label">‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå</label>
              <select class="form-control" id="projectManager"></select>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeModal('projectModal')">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        <button class="btn btn-primary" onclick="saveProject()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
      </div>
    </div>
  </div>

  <script src="assets/js/app.js"></script>
  <script src="assets/js/tasks.js"></script>
  <script src="assets/js/projects.js"></script>
</body>
</html>
